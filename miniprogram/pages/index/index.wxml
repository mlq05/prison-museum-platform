<!--index.wxml - é¦–é¡µ-->
<view class="index-page">
  <!-- å¯¼èˆªæ  -->
  <navigation-bar title="ç›‘ç‹±å†å²æ–‡åŒ–å±•è§ˆé¦†" show-back="{{false}}" />

  <!-- å¯æ»šåŠ¨å†…å®¹åŒºåŸŸ -->
  <scroll-view class="scroll-content" scroll-y="{{true}}" enable-back-to-top="{{true}}">
  <view class="scroll-wrapper">
  <!-- è½®æ’­å›¾ -->
  <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{5000}}" duration="{{500}}" circular="{{true}}">
    <swiper-item wx:for="{{banners}}" wx:key="id">
      <view class="banner-image" style="background-color: {{item.bgColor || '#1A365D'}}; background-image: url('{{item.image}}');">
        <image wx:if="{{item.image}}" class="banner-image-img" src="{{item.image}}" mode="aspectFill" />
      </view>
      <view class="banner-content">
        <view class="banner-title">{{item.title}}</view>
        <view class="banner-subtitle">{{item.subtitle}}</view>
      </view>
    </swiper-item>
  </swiper>

  <!-- å¿«é€Ÿå…¥å£ -->
  <view class="quick-actions">
    <view class="action-item" wx:for="{{quickActions}}" wx:key="id" data-path="{{item.path}}" bindtap="onQuickActionTap">
      <view class="action-icon-wrapper" style="background-color: {{item.color}}20;">
        <image class="action-icon" src="{{item.icon}}" mode="aspectFit" />
      </view>
      <view class="action-title">{{item.title}}</view>
    </view>
  </view>

  <!-- å±•é¦†ä»‹ç» -->
  <view class="exhibition-intro card">
    <view class="intro-title title-large">{{exhibitionInfo.title}}</view>
    <view class="intro-description">{{exhibitionInfo.description}}</view>
    <view class="intro-features">
      <view class="feature-item" wx:for="{{exhibitionInfo.features}}" wx:key="index" wx:for-item="feature">
        <text class="feature-icon">âˆš</text>
        <text class="feature-text">{{feature}}</text>
      </view>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ•°æ® -->
  <view class="statistics card">
    <view class="stat-item">
      <view class="stat-value">{{statistics.totalVisitors}}</view>
      <view class="stat-label">ç´¯è®¡å‚è§‚</view>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <view class="stat-value">{{statistics.totalHalls}}</view>
      <view class="stat-label">å±•åŒºæ•°é‡</view>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <view class="stat-value">{{statistics.arUsageCount}}</view>
      <view class="stat-label">ARä½“éªŒ</view>
    </view>
  </view>

  <!-- çƒ­é—¨å±•åŒº -->
  <view class="section">
    <view class="section-header">
      <view class="section-title title-medium">çƒ­é—¨å±•åŒº</view>
      <view class="section-more" bindtap="onViewMoreHalls">æ›´å¤š ></view>
    </view>
    <!-- å±•é¦†è½®æ’­å›¾ -->
    <view class="hall-banner-section">
      <swiper class="hall-banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{5000}}" duration="{{500}}" circular="{{true}}">
        <swiper-item wx:for="{{hallBanners}}" wx:key="id">
          <view class="hall-banner-image" style="background-color: {{item.bgColor || '#1A365D'}};">
            <image wx:if="{{item.image}}" class="hall-banner-image-img" src="{{item.image}}" mode="aspectFill" lazy-load="{{true}}" />
          </view>
          <view class="hall-banner-content">
            <view class="hall-banner-title">{{item.title}}</view>
            <view class="hall-banner-subtitle">{{item.subtitle}}</view>
          </view>
        </swiper-item>
      </swiper>
    </view>
    <view wx:if="{{hotHalls.length > 0}}" class="hot-halls-list">
      <scroll-view class="hall-scroll" scroll-x="{{true}}" show-scrollbar="{{false}}">
        <view class="hall-list">
          <view class="hall-card" wx:for="{{hotHalls}}" wx:key="id" data-id="{{item.id}}" bindtap="onHallTap">
            <view class="hall-cover" style="background-color: {{item.bgColor || '#1A365D'}};">
              <image wx:if="{{item.coverImage}}" class="hall-cover-img" src="{{item.coverImage}}" mode="aspectFill" />
              <view wx:else class="hall-cover-placeholder">
                <text class="hall-cover-icon">ğŸ›ï¸</text>
              </view>
              <view class="hall-cover-overlay">
                <view class="hall-visit-count" wx:if="{{item.visitCount}}">
                  <text class="hall-visit-icon">ğŸ‘</text>
                  <text class="hall-visit-text">{{item.visitCount}}</text>
                </view>
              </view>
            </view>
            <view class="hall-info">
              <view class="hall-name">{{item.name}}</view>
              <view class="hall-desc">{{item.description}}</view>
              <view class="hall-tags">
                <text class="hall-tag hall-tag-ar" wx:if="{{item.arEnabled}}">ARä½“éªŒ</text>
                <text class="hall-tag hall-tag-hot" wx:if="{{item.visitCount > 1000}}">çƒ­é—¨</text>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>
    <view wx:else class="empty-state">
      <text class="empty-icon">ğŸ“­</text>
      <text class="empty-text">æš‚æ— å±•åŒºæ•°æ®</text>
    </view>
  </view>

  <!-- äº’åŠ¨å¢™ç²¾é€‰ -->
  <view class="section" wx:if="{{featuredFeedbacks.length > 0}}">
    <view class="section-header">
      <view class="section-title title-medium">å‚è§‚åé¦ˆ</view>
      <view class="section-more" bindtap="onViewMoreFeedbacks">æ›´å¤š ></view>
    </view>
    <view class="feedback-list">
      <view class="feedback-card card" wx:for="{{featuredFeedbacks}}" wx:key="id" data-id="{{item.id}}" bindtap="onFeedbackTap">
        <view class="feedback-header">
          <view class="feedback-user">{{item.userName}}</view>
          <view class="feedback-rating">
            <view class="rating-star" wx:for="{{5}}" wx:key="*this">{{index < item.rating ? 'â˜…' : 'â˜†'}}</view>
          </view>
        </view>
        <view class="feedback-content">{{item.content}}</view>
        <view class="feedback-images" wx:if="{{item.images && item.images.length > 0}}">
          <image class="feedback-image" wx:for="{{item.images}}" wx:key="index" src="{{item}}" mode="aspectFill" />
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>
  </view>
  </scroll-view>
</view>
