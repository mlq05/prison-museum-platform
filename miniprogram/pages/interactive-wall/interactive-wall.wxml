<!--interactive-wall.wxml-->
<view class="interactive-wall-page">
  <navigation-bar title="äº’åŠ¨å¢™" />
  
  <scroll-view 
    class="scroll-container" 
    scroll-y 
    refresher-enabled 
    refresher-triggered="{{refreshing || false}}"
    bindrefresherrefresh="onPullDownRefresh"
    bindscrolltolower="onReachBottom"
    lower-threshold="100">
    
    <!-- åé¦ˆåˆ—è¡¨ -->
    <view class="feedback-list" wx:if="{{feedbacks.length > 0}}">
      <view 
        class="feedback-card card" 
        wx:for="{{feedbacks}}" 
        wx:key="id" 
        data-id="{{item.id}}"
        bindtap="onFeedbackTap">
        
        <!-- åé¦ˆå¤´éƒ¨ -->
        <view class="feedback-header">
          <view class="feedback-user-info">
            <view class="feedback-user">{{item.userName}}</view>
            <view class="feedback-type">{{item.typeText}}</view>
          </view>
          <view class="feedback-time">{{item.relativeTime}}</view>
        </view>
        
        <!-- è¯„åˆ† -->
        <view class="feedback-rating" wx:if="{{item.rating > 0}}">
          <view class="rating-stars">
            <text class="star" wx:for="{{5}}" wx:key="*this" wx:for-index="starIndex">
              {{starIndex < item.rating ? 'â˜…' : 'â˜†'}}
            </text>
          </view>
          <text class="rating-text">{{item.rating}}åˆ†</text>
        </view>
        
        <!-- ARè¯„åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰ -->
        <view class="feedback-ar-rating" wx:if="{{item.arRating > 0}}">
          <text class="ar-label">ARä½“éªŒï¼š</text>
          <view class="rating-stars">
            <text class="star" wx:for="{{5}}" wx:key="*this" wx:for-index="starIndex">
              {{starIndex < item.arRating ? 'â˜…' : 'â˜†'}}
            </text>
          </view>
        </view>
        
        <!-- åé¦ˆå†…å®¹ -->
        <view class="feedback-content">{{item.content}}</view>
        
        <!-- åé¦ˆå›¾ç‰‡ -->
        <view class="feedback-images" wx:if="{{item.images && item.images.length > 0}}">
          <image 
            class="feedback-image" 
            wx:for="{{item.images}}" 
            wx:key="index" 
            wx:for-item="img"
            src="{{img}}" 
            mode="aspectFill"
            data-index="{{index}}"
            data-images="{{item.images}}"
            bindtap="onImageTap" />
        </view>
        
        <!-- åé¦ˆæ—¶é—´ -->
        <view class="feedback-footer">
          <text class="feedback-date">{{item.formattedDate}}</text>
        </view>
      </view>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{empty && !loading}}">
      <text class="empty-icon">ğŸ’¬</text>
      <text class="empty-text">æš‚æ— åé¦ˆ</text>
      <text class="empty-hint">æˆä¸ºç¬¬ä¸€ä¸ªåˆ†äº«å‚è§‚ä½“éªŒçš„ç”¨æˆ·å§ï¼</text>
    </view>
    
    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:if="{{loading && feedbacks.length > 0}}">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
    
    <!-- æ²¡æœ‰æ›´å¤š -->
    <view class="no-more" wx:if="{{!hasMore && feedbacks.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
    
    <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
    <view class="scroll-bottom-safe"></view>
  </scroll-view>
  
  <!-- æäº¤åé¦ˆæµ®åŠ¨æŒ‰é’® -->
  <view class="fab-container">
    <view class="fab-btn" bindtap="onSubmitFeedback">
      <text class="fab-icon">âœ</text>
      <text class="fab-text">å†™åé¦ˆ</text>
    </view>
  </view>
</view>

